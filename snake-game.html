<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Neon Snake</title>

		<style>
			body {
				margin: 0;
				height: 100vh;
				display: flex;
				justify-content: center;
				align-items: center;
				background: #060612;
				font-family: Arial, sans-serif;
				overflow: hidden;
			}

			.game-container {
				position: relative;
				text-align: center;
			}

			canvas {
				background: #0f0f2e;
				border-radius: 16px;
				box-shadow: 0 0 40px #00ffcc;
			}

			.score {
				color: #00ffcc;
				font-size: 20px;
				margin-bottom: 10px;
				text-shadow: 0 0 10px #00ffcc;
			}

			.overlay {
				position: absolute;
				inset: 0;
				background: rgba(0, 0, 0, 0.85);
				display: flex;
				flex-direction: column;
				justify-content: center;
				align-items: center;
				gap: 20px;
				color: #00ffcc;
				font-size: 22px;
			}

			button {
				padding: 12px 24px;
				border: none;
				border-radius: 8px;
				background: #00ffcc;
				font-weight: bold;
				cursor: pointer;
			}

			@media (max-width: 768px) {
				canvas {
					width: 90vw;
					height: 90vw;
				}
			}
		</style>
	</head>
	<body>
		<div class="game-container">
			<div class="score">Score: <span id="score">0</span></div>
			<canvas id="game" width="400" height="400"></canvas>

			<div class="overlay" id="start">
				<h2>âš¡ Neon Snake</h2>
				<button onclick="startGame()">Start</button>
			</div>

			<div class="overlay" id="gameOver" style="display: none">
				<h2>Game Over</h2>
				<div>Final Score: <span id="finalScore"></span></div>
				<button onclick="restartGame()">Restart</button>
			</div>
		</div>

		<audio id="eatSound">
			<source src="https://actions.google.com/sounds/v1/cartoon/pop.ogg" />
		</audio>
		<audio id="crashSound">
			<source
				src="https://actions.google.com/sounds/v1/cartoon/clang_and_wobble.ogg"
			/>
		</audio>

		<script>
			const canvas = document.getElementById("game");
			const ctx = canvas.getContext("2d");
			const grid = 20;
			const count = canvas.width / grid;

			let snake, food, dx, dy, score, loop;
			let running = false;
			let particles = [];

			function startGame() {
				document.getElementById("start").style.display = "none";
				init();
				running = true;
				gameLoop();
			}

			function restartGame() {
				document.getElementById("gameOver").style.display = "none";
				init();
				running = true;
				gameLoop();
			}

			function init() {
				snake = [
					{ x: 10, y: 10 },
					{ x: 9, y: 10 },
					{ x: 8, y: 10 },
				];
				dx = 1;
				dy = 0;
				score = 0;
				document.getElementById("score").innerText = score;
				spawnFood();
				particles = [];
			}

			function spawnFood() {
				food = {
					x: Math.floor(Math.random() * count),
					y: Math.floor(Math.random() * count),
				};
			}

			function drawGrid() {
				ctx.strokeStyle = "rgba(0,255,204,0.05)";
				for (let i = 0; i < count; i++) {
					ctx.beginPath();
					ctx.moveTo(i * grid, 0);
					ctx.lineTo(i * grid, canvas.height);
					ctx.stroke();
					ctx.beginPath();
					ctx.moveTo(0, i * grid);
					ctx.lineTo(canvas.width, i * grid);
					ctx.stroke();
				}
			}

			function draw() {
				ctx.fillStyle = "#0f0f2e";
				ctx.fillRect(0, 0, canvas.width, canvas.height);

				drawGrid();

				ctx.shadowBlur = 20;
				ctx.shadowColor = "#ff00ff";

				// Food (glowing orb)
				ctx.beginPath();
				ctx.arc(food.x * grid + 10, food.y * grid + 10, 8, 0, Math.PI * 2);
				ctx.fillStyle = "#ff00ff";
				ctx.fill();
				ctx.shadowBlur = 0;

				// Snake
				snake.forEach((s, i) => {
					ctx.shadowBlur = 15;
					ctx.shadowColor = "#00ffcc";
					ctx.beginPath();
					ctx.arc(s.x * grid + 10, s.y * grid + 10, 9, 0, Math.PI * 2);
					ctx.fillStyle = i === 0 ? "#ffffff" : "#00ffcc";
					ctx.fill();
					ctx.shadowBlur = 0;
				});

				// Particles
				particles.forEach((p) => {
					ctx.fillStyle = p.color;
					ctx.fillRect(p.x, p.y, 3, 3);
				});
			}

			function update() {
				const head = { x: snake[0].x + dx, y: snake[0].y + dy };

				if (
					head.x < 0 ||
					head.x >= count ||
					head.y < 0 ||
					head.y >= count ||
					snake.some((s) => s.x === head.x && s.y === head.y)
				) {
					gameOver();
					return;
				}

				snake.unshift(head);

				if (head.x === food.x && head.y === food.y) {
					score++;
					document.getElementById("score").innerText = score;
					document.getElementById("eatSound").play();
					for (let i = 0; i < 15; i++) {
						particles.push({
							x: food.x * grid + 10,
							y: food.y * grid + 10,
							color: "#ff00ff",
						});
					}
					spawnFood();
				} else {
					snake.pop();
				}

				particles.forEach((p) => {
					p.x += Math.random() * 6 - 3;
					p.y += Math.random() * 6 - 3;
				});
			}

			function gameLoop() {
				if (!running) return;
				update();
				draw();
				loop = setTimeout(gameLoop, 90);
			}

			function gameOver() {
				running = false;
				clearTimeout(loop);
				document.getElementById("crashSound").play();
				document.getElementById("finalScore").innerText = score;
				document.getElementById("gameOver").style.display = "flex";
			}

			document.addEventListener("keydown", (e) => {
				if (e.key === "ArrowUp" && dy === 0) {
					dx = 0;
					dy = -1;
				}
				if (e.key === "ArrowDown" && dy === 0) {
					dx = 0;
					dy = 1;
				}
				if (e.key === "ArrowLeft" && dx === 0) {
					dx = -1;
					dy = 0;
				}
				if (e.key === "ArrowRight" && dx === 0) {
					dx = 1;
					dy = 0;
				}
			});

			// Swipe controls
			let startX = 0,
				startY = 0;
			canvas.addEventListener("touchstart", (e) => {
				startX = e.touches[0].clientX;
				startY = e.touches[0].clientY;
			});

			canvas.addEventListener("touchend", (e) => {
				let endX = e.changedTouches[0].clientX;
				let endY = e.changedTouches[0].clientY;
				let diffX = endX - startX;
				let diffY = endY - startY;

				if (Math.abs(diffX) > Math.abs(diffY)) {
					if (diffX > 0 && dx === 0) {
						dx = 1;
						dy = 0;
					} else if (diffX < 0 && dx === 0) {
						dx = -1;
						dy = 0;
					}
				} else {
					if (diffY > 0 && dy === 0) {
						dx = 0;
						dy = 1;
					} else if (diffY < 0 && dy === 0) {
						dx = 0;
						dy = -1;
					}
				}
			});
		</script>
	</body>
</html>
