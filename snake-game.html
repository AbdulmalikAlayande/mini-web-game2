<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Snake Game</title>

		<style>
			body {
				margin: 0;
				background: linear-gradient(135deg, #0f172a, #1e293b);
				display: flex;
				justify-content: center;
				align-items: center;
				height: 100vh;
				font-family: Arial, sans-serif;
				color: white;
			}

			.game-wrapper {
				text-align: center;
			}

			canvas {
				background: #111827;
				border-radius: 12px;
				box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
			}

			.scoreboard {
				display: flex;
				justify-content: space-between;
				margin-bottom: 10px;
			}

			.overlay {
				position: absolute;
				inset: 0;
				background: rgba(0, 0, 0, 0.9);
				display: flex;
				flex-direction: column;
				justify-content: center;
				align-items: center;
				gap: 15px;
			}

			button {
				padding: 12px 20px;
				border: none;
				border-radius: 8px;
				background: #22c55e;
				font-weight: bold;
				font-size: 16px;
				cursor: pointer;
			}

			.controls {
				margin-top: 15px;
				display: grid;
				grid-template-areas:
					". up ."
					"left down right";
				gap: 10px;
				justify-content: center;
			}

			.controls button {
				width: 60px;
				height: 60px;
				font-size: 20px;
			}

			.up {
				grid-area: up;
			}
			.down {
				grid-area: down;
			}
			.left {
				grid-area: left;
			}
			.right {
				grid-area: right;
			}

			@media (min-width: 768px) {
				.controls {
					display: none;
				}
			}
		</style>
	</head>
	<body>
		<div class="game-wrapper">
			<div class="scoreboard">
				<div>Score: <span id="score">0</span></div>
				<div>Mode: <span id="mode">Easy</span></div>
			</div>

			<canvas id="gameCanvas" width="400" height="400"></canvas>

			<div class="overlay" id="startScreen">
				<h2>üêç Snake Game</h2>
				<button onclick="selectDifficulty('easy')">Easy</button>
				<button onclick="selectDifficulty('hard')">Hard</button>
			</div>

			<div class="overlay" id="gameOverScreen" style="display: none">
				<h2>Game Over</h2>
				<div>Final Score: <span id="finalScore"></span></div>
				<button onclick="restartGame()">Restart</button>
			</div>

			<div class="controls">
				<button class="up">‚¨Ü</button>
				<button class="left">‚¨Ö</button>
				<button class="down">‚¨á</button>
				<button class="right">‚û°</button>
			</div>
		</div>

		<audio id="eatSound">
			<source
				src="https://actions.google.com/sounds/v1/cartoon/wood_plank_flicks.ogg"
			/>
		</audio>

		<audio id="gameOverSound">
			<source
				src="https://actions.google.com/sounds/v1/cartoon/concussive_drum_hit.ogg"
			/>
		</audio>

		<script>
			const canvas = document.getElementById("gameCanvas");
			const ctx = canvas.getContext("2d");
			const eatSound = document.getElementById("eatSound");
			const gameOverSound = document.getElementById("gameOverSound");

			const gridSize = 20;
			const tileCount = canvas.width / gridSize;

			let snake, egg, dx, dy, score;
			let gameSpeed,
				baseSpeed = 140;
			let difficulty = "easy";
			let gameRunning = false;
			let gameTimeout;

			function selectDifficulty(level) {
				difficulty = level;
				baseSpeed = level === "easy" ? 140 : 80;
				document.getElementById("mode").textContent = level;
				document.getElementById("startScreen").style.display = "none";
				startGame();
			}

			function startGame() {
				snake = [
					{ x: 10, y: 10 },
					{ x: 9, y: 10 },
					{ x: 8, y: 10 },
				];
				dx = 1;
				dy = 0;
				score = 0;
				gameSpeed = baseSpeed;
				generateEgg();
				document.getElementById("score").textContent = score;
				gameRunning = true;
				gameLoop();
			}

			function generateEgg() {
				egg = {
					x: Math.floor(Math.random() * tileCount),
					y: Math.floor(Math.random() * tileCount),
				};
			}

			function draw() {
				ctx.fillStyle = "#111827";
				ctx.fillRect(0, 0, canvas.width, canvas.height);

				ctx.beginPath();
				ctx.arc(
					egg.x * gridSize + 10,
					egg.y * gridSize + 10,
					8,
					0,
					Math.PI * 2,
				);
				ctx.fillStyle = "#facc15";
				ctx.fill();

				snake.forEach((seg, index) => {
					const x = seg.x * gridSize + 10;
					const y = seg.y * gridSize + 10;

					ctx.beginPath();
					ctx.arc(x, y, 8, 0, Math.PI * 2);
					ctx.fillStyle = index === 0 ? "#4ade80" : "#22c55e";
					ctx.fill();

					if (index === 0) {
						ctx.fillStyle = "white";
						ctx.beginPath();
						ctx.arc(x - 3, y - 3, 2, 0, Math.PI * 2);
						ctx.arc(x + 3, y - 3, 2, 0, Math.PI * 2);
						ctx.fill();
					}
				});
			}

			function update() {
				const head = { x: snake[0].x + dx, y: snake[0].y + dy };

				if (
					head.x < 0 ||
					head.x >= tileCount ||
					head.y < 0 ||
					head.y >= tileCount ||
					snake.some((s) => s.x === head.x && s.y === head.y)
				) {
					gameOver();
					return;
				}

				snake.unshift(head);

				if (head.x === egg.x && head.y === egg.y) {
					score++;
					eatSound.currentTime = 0;
					eatSound.play();
					generateEgg();
					document.getElementById("score").textContent = score;
				} else {
					snake.pop();
				}
			}

			function gameLoop() {
				if (!gameRunning) return;
				update();
				draw();
				gameTimeout = setTimeout(gameLoop, gameSpeed);
			}

			function gameOver() {
				clearTimeout(gameTimeout);
				gameRunning = false;
				gameOverSound.play();
				document.getElementById("finalScore").textContent = score;
				document.getElementById("gameOverScreen").style.display = "flex";
			}

			function restartGame() {
				document.getElementById("gameOverScreen").style.display = "none";
				document.getElementById("startScreen").style.display = "flex";
			}

			document.addEventListener("keydown", (e) => {
				if (!gameRunning) return;
				if (e.key === "ArrowUp" && dy === 0) {
					dx = 0;
					dy = -1;
				}
				if (e.key === "ArrowDown" && dy === 0) {
					dx = 0;
					dy = 1;
				}
				if (e.key === "ArrowLeft" && dx === 0) {
					dx = -1;
					dy = 0;
				}
				if (e.key === "ArrowRight" && dx === 0) {
					dx = 1;
					dy = 0;
				}
			});

			document.querySelector(".up").onclick = () => {
				if (dy === 0) {
					dx = 0;
					dy = -1;
				}
			};
			document.querySelector(".down").onclick = () => {
				if (dy === 0) {
					dx = 0;
					dy = 1;
				}
			};
			document.querySelector(".left").onclick = () => {
				if (dx === 0) {
					dx = -1;
					dy = 0;
				}
			};
			document.querySelector(".right").onclick = () => {
				if (dx === 0) {
					dx = 1;
					dy = 0;
				}
			};
		</script>
	</body>
</html>
