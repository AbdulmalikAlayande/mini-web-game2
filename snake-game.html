<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Neon Cyber Snake</title>

		<style>
			body {
				margin: 0;
				background: #060612;
				display: flex;
				justify-content: center;
				align-items: center;
				height: 100vh;
				font-family: Arial, sans-serif;
				overflow: hidden;
				color: #00ffcc;
			}

			.game-wrapper {
				position: relative;
				text-align: center;
			}

			canvas {
				background: #0f0f2e;
				border-radius: 18px;
				box-shadow: 0 0 40px #00ffcc;
			}

			.scorebar {
				display: flex;
				justify-content: space-between;
				margin-bottom: 10px;
				font-size: 18px;
				text-shadow: 0 0 10px #00ffcc;
			}

			.overlay {
				position: absolute;
				inset: 0;
				background: rgba(0, 0, 0, 0.9);
				display: flex;
				flex-direction: column;
				justify-content: center;
				align-items: center;
				gap: 15px;
			}

			button {
				padding: 10px 20px;
				background: #00ffcc;
				border: none;
				border-radius: 8px;
				font-weight: bold;
				cursor: pointer;
			}

			.pause-btn {
				position: absolute;
				top: 10px;
				right: 10px;
				background: #ff00ff;
				color: white;
			}

			@media (max-width: 768px) {
				canvas {
					width: 90vw;
					height: 90vw;
				}
			}
		</style>
	</head>

	<body>
		<div class="game-wrapper">
			<div class="scorebar">
				<div>Score: <span id="score">0</span></div>
				<div>Mode: <span id="mode">Easy</span></div>
			</div>

			<canvas id="canvas" width="400" height="400"></canvas>
			<button class="pause-btn" onclick="togglePause()">Pause</button>

			<div class="overlay" id="startScreen">
				<h2>âš¡ Neon Cyber Snake</h2>
				<button onclick="selectMode('easy')">Easy</button>
				<button onclick="selectMode('hard')">Hard</button>
			</div>

			<div class="overlay" id="gameOverScreen" style="display: none">
				<h2>Game Over</h2>
				<div>Final Score: <span id="finalScore"></span></div>
				<button onclick="restartGame()">Restart</button>
			</div>
		</div>

		<audio id="eatSound">
			<source src="https://actions.google.com/sounds/v1/cartoon/pop.ogg" />
		</audio>

		<audio id="crashSound">
			<source
				src="https://actions.google.com/sounds/v1/cartoon/clang_and_wobble.ogg"
			/>
		</audio>

		<script>
			const canvas = document.getElementById("canvas");
			const ctx = canvas.getContext("2d");

			const grid = 20;
			const count = canvas.width / grid;

			let snake, food, dx, dy, score;
			let baseSpeed = 120;
			let speed;
			let loop;
			let running = false;
			let paused = false;
			let particles = [];
			let mode = "easy";

			function selectMode(m) {
				mode = m;
				baseSpeed = m === "easy" ? 140 : 80;
				document.getElementById("mode").textContent = m;
				document.getElementById("startScreen").style.display = "none";
				startGame();
			}

			function startGame() {
				init();
				running = true;
				paused = false;
				gameLoop();
			}

			function restartGame() {
				document.getElementById("gameOverScreen").style.display = "none";
				startGame();
			}

			function init() {
				snake = [
					{ x: 10, y: 10 },
					{ x: 9, y: 10 },
					{ x: 8, y: 10 },
				];
				dx = 1;
				dy = 0;
				score = 0;
				speed = baseSpeed;
				particles = [];
				document.getElementById("score").textContent = score;
				spawnFood();
			}

			function spawnFood() {
				food = {
					x: Math.floor(Math.random() * count),
					y: Math.floor(Math.random() * count),
				};
			}

			function drawGrid() {
				ctx.strokeStyle = "rgba(0,255,204,0.05)";
				for (let i = 0; i < count; i++) {
					ctx.beginPath();
					ctx.moveTo(i * grid, 0);
					ctx.lineTo(i * grid, canvas.height);
					ctx.stroke();
					ctx.beginPath();
					ctx.moveTo(0, i * grid);
					ctx.lineTo(canvas.width, i * grid);
					ctx.stroke();
				}
			}

			function draw() {
				ctx.fillStyle = "#0f0f2e";
				ctx.fillRect(0, 0, canvas.width, canvas.height);

				drawGrid();

				// food glow
				ctx.shadowBlur = 25;
				ctx.shadowColor = "#ff00ff";
				ctx.beginPath();
				ctx.arc(food.x * grid + 10, food.y * grid + 10, 8, 0, Math.PI * 2);
				ctx.fillStyle = "#ff00ff";
				ctx.fill();
				ctx.shadowBlur = 0;

				// snake
				snake.forEach((s, i) => {
					ctx.shadowBlur = 15;
					ctx.shadowColor = "#00ffcc";
					ctx.beginPath();
					ctx.arc(s.x * grid + 10, s.y * grid + 10, 9, 0, Math.PI * 2);
					ctx.fillStyle = i === 0 ? "#ffffff" : "#00ffcc";
					ctx.fill();
					ctx.shadowBlur = 0;
				});

				// particles
				particles.forEach((p) => {
					ctx.fillStyle = p.color;
					ctx.fillRect(p.x, p.y, 3, 3);
				});
			}

			function update() {
				if (paused) return;

				const head = { x: snake[0].x + dx, y: snake[0].y + dy };

				if (
					head.x < 0 ||
					head.x >= count ||
					head.y < 0 ||
					head.y >= count ||
					snake.some((s) => s.x === head.x && s.y === head.y)
				) {
					gameOver();
					return;
				}

				snake.unshift(head);

				if (head.x === food.x && head.y === food.y) {
					score++;
					document.getElementById("score").textContent = score;
					document.getElementById("eatSound").play();

					// progressive speed increase
					if (score % 5 === 0 && speed > 50) {
						speed -= 5;
					}

					for (let i = 0; i < 15; i++) {
						particles.push({
							x: food.x * grid + 10,
							y: food.y * grid + 10,
							color: "#ff00ff",
						});
					}

					spawnFood();
				} else {
					snake.pop();
				}

				particles.forEach((p) => {
					p.x += Math.random() * 6 - 3;
					p.y += Math.random() * 6 - 3;
				});
			}

			function gameLoop() {
				if (!running) return;
				update();
				draw();
				loop = setTimeout(gameLoop, speed);
			}

			function gameOver() {
				running = false;
				clearTimeout(loop);
				document.getElementById("crashSound").play();
				document.getElementById("finalScore").textContent = score;
				document.getElementById("gameOverScreen").style.display = "flex";
			}

			function togglePause() {
				if (!running) return;
				paused = !paused;
			}

			document.addEventListener("keydown", (e) => {
				if (e.code === "Space") togglePause();

				if (e.key === "ArrowUp" && dy === 0) {
					dx = 0;
					dy = -1;
				}
				if (e.key === "ArrowDown" && dy === 0) {
					dx = 0;
					dy = 1;
				}
				if (e.key === "ArrowLeft" && dx === 0) {
					dx = -1;
					dy = 0;
				}
				if (e.key === "ArrowRight" && dx === 0) {
					dx = 1;
					dy = 0;
				}
			});

			// swipe mobile
			let startX = 0,
				startY = 0;
			canvas.addEventListener("touchstart", (e) => {
				startX = e.touches[0].clientX;
				startY = e.touches[0].clientY;
			});

			canvas.addEventListener("touchend", (e) => {
				let endX = e.changedTouches[0].clientX;
				let endY = e.changedTouches[0].clientY;
				let diffX = endX - startX;
				let diffY = endY - startY;

				if (Math.abs(diffX) > Math.abs(diffY)) {
					if (diffX > 0 && dx === 0) {
						dx = 1;
						dy = 0;
					} else if (diffX < 0 && dx === 0) {
						dx = -1;
						dy = 0;
					}
				} else {
					if (diffY > 0 && dy === 0) {
						dx = 0;
						dy = 1;
					} else if (diffY < 0 && dy === 0) {
						dx = 0;
						dy = -1;
					}
				}
			});
		</script>
	</body>
</html>
